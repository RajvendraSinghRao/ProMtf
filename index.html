<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live NSE Prices</title>
  <style>
    body { font-family: Arial; text-align: center; padding: 40px; background: #f4f4f4; }
    table { margin: auto; border-collapse: collapse; width: 80%; background: white; }
    th, td { padding: 10px 20px; border: 1px solid #ddd; }
    th { background: #007bff; color: white; }
    .price { font-weight: bold; color: green; }
    .error { color: red; }
  </style>
</head>
<body>

<h1>Live NSE Stock Prices</h1>
<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Symbol</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody id="stock-table"></tbody>
</table>

<script>
  const apiKey = "d1g0871r01qk4ao06vk0"; // ✅ FIXED API key
  const stocks = [
    { name: "Reliance", symbol: "RELIANCE.NS" },
    { name: "TCS", symbol: "TCS.NS" },
    { name: "Infosys", symbol: "INFY.NS" }
  ];

  const table = document.getElementById("stock-table");

  stocks.forEach(stock => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${stock.name}</td>
      <td>${stock.symbol}</td>
      <td class="price" id="${stock.symbol}">Loading...</td>
    `;
    table.appendChild(row);
  });

  async function updatePrices() {
    for (let stock of stocks) {
      try {
        const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${stock.symbol}&token=${apiKey}`);
        const data = await res.json();
        const price = data.c ? `₹${data.c.toFixed(2)}` : `<span class="error">N/A</span>`;
        document.getElementById(stock.symbol).innerHTML = price;
      } catch {
        document.getElementById(stock.symbol).innerHTML = `<span class="error">Error</span>`;
      }
    }
  }

  updatePrices();
  setInterval(updatePrices, 10000);
</script>

</body>
</html>
